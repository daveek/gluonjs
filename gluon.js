function e(e,...t){let s=n.get(e);return void 0===s&&(s=new l(e),n.set(e,s)),new i(s,t)}function t(e,t,s=u){let n=t.__templateInstance;if(void 0!==n&&n.template===e.template&&n._partCallback===s)return void n.update(e.values);n=new d(e.template,s),t.__templateInstance=n;const i=n._clone();n.update(e.values);let o;for(;o=t.lastChild;)t.removeChild(o);t.appendChild(i)}function s(e,s){t(e,s,p)}const n=new Map;class i{constructor(e,t){this.template=e,this.values=t}}const o=`{{lit-${Math.random()}}}`;class r{constructor(e,t,s,n,i){this.type=e,this.index=t,this.name=s,this.rawName=n,this.strings=i}}class l{constructor(e){this.parts=[],this.element=document.createElement("template"),this.element.innerHTML=e.join(o);const t=document.createTreeWalker(this.element.content,5);let s=-1,n=0;const i=[];for(;t.nextNode();){s++;const l=t.currentNode;if(1===l.nodeType){if(!l.hasAttributes())continue;const t=l.attributes;for(let i=0;i<t.length;i++){const a=t.item(i),h=a.value.split(o);if(h.length>1){const t=e[n],o=t.substring(0,t.length-h[0].length).match(/((?:\w|[.\-_$])+)=["']?$/)[1];this.parts.push(new r("attribute",s,a.name,o,h)),l.removeAttribute(a.name),n+=h.length-1,i--}}}else if(3===l.nodeType){const e=l.nodeValue.split(o);if(e.length>1){const t=l.parentNode,i=e.length-1;n+=i,l.textContent=e[i];for(let n=0;n<i;n++)t.insertBefore(new Text(e[n]),l),this.parts.push(new r("node",s++))}else l.nodeValue.trim()||(i.push(l),s--)}}for(const e of i)e.parentNode.removeChild(e)}}const a=(e,t)=>(null!=t&&!0===t.__litDirective&&(t=t(e)),null===t?void 0:t);class h{constructor(e,t,s,n){this.instance=e,this.element=t,this.name=s,this.strings=n,this.size=n.length-1}setValue(e,t){const s=this.strings;let n="";for(let i=0;i<s.length;i++)if(n+=s[i],i<s.length-1){const s=a(this,e[t+i]);if(s&&(Array.isArray(s)||"string"!=typeof s&&s[Symbol.iterator]))for(const e of s)n+=e;else n+=s}this.element.setAttribute(this.name,n)}}class c{constructor(e,t,s){this.instance=e,this.startNode=t,this.endNode=s}setValue(e){if(null===(e=a(this,e))||"object"!=typeof e&&"function"!=typeof e){if(e===this._previousValue)return;this._setText(e)}else e instanceof i?this._setTemplateResult(e):Array.isArray(e)||e[Symbol.iterator]?this._setIterable(e):e instanceof Node?this._setNode(e):void 0!==e.then?this._setPromise(e):this._setText(e)}_insert(e){this.endNode.parentNode.insertBefore(e,this.endNode)}_setNode(e){this.clear(),this._insert(e),this._previousValue=e}_setText(e){const t=this.startNode.nextSibling;t===this.endNode.previousSibling&&t.nodeType===Node.TEXT_NODE?t.textContent=e:this._setNode(new Text(e)),this._previousValue=e}_setTemplateResult(e){let t;this._previousValue&&this._previousValue.template===e.template?t=this._previousValue:(t=new d(e.template,this.instance._partCallback),this._setNode(t._clone()),this._previousValue=t),t.update(e.values)}_setIterable(e){Array.isArray(this._previousValue)||(this.clear(),this._previousValue=[]);const t=this._previousValue;let s=0;for(const n of e){let e=t[s];if(void 0===e){let n=this.startNode;s>0&&(n=t[s-1].endNode=new Text,this._insert(n)),e=new c(this.instance,n,this.endNode),t.push(e)}e.setValue(n),s++}if(0===s)this.clear(),this._previousValue=void 0;else if(s<t.length){const e=t[s-1];this.clear(e.endNode.previousSibling),e.endNode=this.endNode}}_setPromise(e){e.then(t=>{this._previousValue===e&&this.setValue(t)}),this._previousValue=e}clear(e=this.startNode){let t;for(;(t=e.nextSibling)!==this.endNode;)t.parentNode.removeChild(t)}}const u=(e,t,s)=>{if("attribute"===t.type)return new h(e,s,t.name,t.strings);if("node"===t.type)return new c(e,s,s.nextSibling);throw new Error(`Unknown part type ${t.type}`)};class d{constructor(e,t=u){this._parts=[],this.template=e,this._partCallback=t}update(e){let t=0;for(const s of this._parts)void 0===s.size?(s.setValue(e[t]),t++):(s.setValue(e,t),t+=s.size)}_clone(){const e=document.importNode(this.template.element.content,!0);if(this.template.parts.length>0){const t=document.createTreeWalker(e,5),s=this.template.parts;let n=0,i=0,o=s[0],r=t.nextNode();for(;null!=r&&i<s.length;)n===o.index?(this._parts.push(this._partCallback(this,o,r)),o=s[++i]):(n++,r=t.nextNode())}return e}}const p=(e,t,s)=>{if("attribute"===t.type){if(t.rawName.startsWith("on-")){const n=t.rawName.substring(3);return new _(e,s,n)}if(t.name.endsWith("$")){const n=t.name.substring(0,t.name.length-1);return new h(e,s,n,t.strings)}return new m(e,s,t.rawName,t.strings)}return u(e,t,s)};class m extends h{setValue(e,t){const s=this.strings;let n;if(2===s.length&&""===s[0]&&""===s[s.length-1])n=a(this,e[t]);else{n="";for(let i=0;i<s.length;i++)n+=s[i],i<s.length-1&&(n+=a(this,e[t+i]))}this.element[this.name]=n}}class _{constructor(e,t,s){this.instance=e,this.element=t,this.eventName=s}setValue(e){const t=a(this,e);t!==this._listener&&(null==t?this.element.removeEventListener(this.eventName,this):null==this._listener&&this.element.addEventListener(this.eventName,this),this._listener=t)}handleEvent(e){"function"==typeof this._listener?this._listener.call(this.element,e):"function"==typeof this._listener.handleEvent&&this._listener.handleEvent(e)}}const f=Symbol("tag"),v=Symbol("needsRender"),g=Symbol("shadyTemplate"),N=e=>{if(window.ShadyCSS){const t=e.constructor;void 0===t[g]&&(t[g]=document.createElement("template"),t[g].innerHTML=e.shadowRoot.innerHTML,ShadyCSS.prepareTemplate(t[g],t.is)),ShadyCSS.styleElement(e)}},y=e=>e.replace(/([a-z])([A-Z])|(.)([A-Z][a-z])/g,"$1$3-$2$4").toLowerCase(),w=e=>{e.$={},e.shadowRoot.querySelectorAll("[id]").forEach(t=>{e.$[t.id]=t})};class b extends HTMLElement{static get is(){return this.hasOwnProperty(f)&&this[f]||(this[f]=y(this.name))}connectedCallback(){"template"in this&&(this.attachShadow({mode:"open"}),this.render({sync:!0}),w(this))}async render({sync:e=!1}={}){this[v]=!0,e||await 0,this[v]&&(this[v]=!1,s(this.template,this.shadowRoot),N(this))}}export{b as GluonElement,e as html};